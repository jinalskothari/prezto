#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Integrate new system of desktop utils
source /Users/kalki/desktop-utils/jinal/integrate.sh
# End Desktop Utils Integration

# Jinal's customizations
export YABAIRC=~/.config/yabai/yabairc
export SKHDRC=~/.config/skhd/skhdrc
alias edit_yabai="code $YABAIRC $SKHDRC"
alias reload_yabai="source $YABAIRC"
alias edit_prezto="code ~/.zprezto/ ~/.zprezto/runcoms/zshrc ~/.zprezto/runcoms/zshenv ~/.zprezto/runcoms/zprofile ~/.zprezto/runcoms/README.md"
function iterm() {
  open -a iTerm .
}

# Pushes repo to Bitcraft gitlab which in turn creates a new project
# $1 can be top level [PROJECT_NAME] or [SUBGROUP/PROJECT_NAME]
function gitlab_new_push() {
  url=git@gitlab.com:bitcraftin/$1.git
  current_branch=$(git rev-parse --abbrev-ref HEAD | tr -d '\n')
  if git remote | grep -q "origin"; then
    git remote set-url origin $url
  else
    git remote add origin $url
  fi
  git push --set-upstream origin $current_branch
}

function pwdcp() {
  pwd | tr -d '\n' | pbcopy
  echo "Current working directory copied to clipboard without trailing newline!"
}

export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm

#kubectl completions
#source <(kubectl completion zsh)
# Starship prompt
eval "$(starship init zsh)"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion" # This loads nvm bash_completion

# prezto uses fasd_cd with a useful j alias, but i want it use it as z
alias z=j
